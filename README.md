# esp8266lua

Выключатель света на базе SOC esp 8266 и прошивки nodemcu https://github.com/nodemcu/nodemcu-firmware/tree/dev096
Умеет подключается к точке доступа и параллельно для конфигурирования поднимает свою точку доступа 
Оптопара pc817 припаивается к gpio0 + VDD3.3 последовательно через резистор на 300 Ом выход оптопары "закорачивает" на "минус" управляющий контакт тиристора который подтянут на "плюс" через резистор 1 Мом.
Тиристор включен в диагональ диодного моста для закорачивания его контактов (+-) что дает позможность переключения приборов по переменному току. Собрал так поскольку тиристор попался под руку, а твердотельное реле так и не пришли.
кнопка припаивается к gpio2 + GND.

для конфигурирования/программирования выключателя по сети в адрессной строке браузера необходимо зайти http://192.168.4.1/LIST
появится список файлов , при клике по файлу он отобразится в окне редактирования
при нажатии на кнопку Send файл загрузится и покажется лог загрузки.

ВНИМАНИЕ! программа загружает лишь файлы менее 800 байт. возможно по причине неправильного формирования Post запроса (Pull request приветсвуются)


todo:

-Дизайн управления расписанием

-Выключение/включение света по расписанию

-Закачка файлов более килобайта 

-Сохранение состояния (на случай отключения от электричества)

-Рефакторинг



11/06/15

-Добавил управление светом с кнопки

-Добавил закачку и редактирование файлов (до 800 байт) прямо в браузере 

-Управление в вебинтерфейсе сделал в виде 1 кнопки ON или OFF

